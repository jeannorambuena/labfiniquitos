{% extends 'base.html' %}

{% block title %}Inicio ‚Äî Sistema de Apoyo Laboral{% endblock %}

{% block content %}
<!-- Cabecera WOW -->
<section class="py-4">
  <div class="container text-center">
    <div class="bg-gradient p-4 px-5 rounded-4 shadow-lg d-inline-block text-white w-100" style="background: linear-gradient(135deg, #3b82f6, #64748b);">
      <h1 class="display-5 fw-bold mb-0">Sistema de Apoyo Laboral</h1>
    </div>
  </div>
</section>

<!-- Bot√≥n de mostrar/ocultar m√©tricas -->
<button class="btn btn-outline-light position-fixed top-0 start-0 m-3 d-none d-md-block" id="toggleMenu" style="z-index: 1050;">
  üìä M√©tricas
</button>

<!-- Men√∫ emergente de estad√≠sticas -->
<aside id="menuMetricas" class="position-fixed top-0 start-0 h-100 bg-dark bg-opacity-75 text-white p-4 d-none d-md-flex flex-column" style="width: 240px; z-index: 1045;">
  <h5 class="mb-4 border-bottom pb-2">Men√∫ M√©tricas</h5>
  <ul class="nav flex-column gap-3">
    <li class="nav-item">üë∑ Total de Trabajadores</li>
    <li class="nav-item">üè¢ Total de Empresas</li>
    <li class="nav-item">üìÑ Documentos Registrados</li>
    <li class="nav-item">‚úÇÔ∏è Finiquitos Emitidos</li>
    <li class="nav-item">üìä Informes Generales</li>
  </ul>
</aside>

<section class="container-fluid py-5">
  <div class="row g-5 justify-content-center">
    {% set modulos = [
      {'color': 'bg-primary', 'titulo': 'Trabajador', 'desc': 'Gesti√≥n de personal y RRHH', 'svg': 'user'},
      {'color': 'bg-success', 'titulo': 'Empresa', 'desc': 'Datos y responsables del empleador', 'svg': 'building'},
      {'color': 'bg-warning', 'titulo': 'Documentos', 'desc': 'Contratos, cartas y anexos legales', 'svg': 'document'},
      {'color': 'bg-danger', 'titulo': 'Finiquitos', 'desc': 'Procesos autom√°ticos de desvinculaci√≥n', 'svg': 'scissors'}
    ] %}

    {% for m in modulos %}
    <div class="col-12 col-sm-6 col-lg-4 col-xl-3">
      <div class="card modulo-card border-0 text-center text-white {{ m.color }} shadow-lg p-4 rounded-4 h-100 overflow-hidden" style="transition: all 0.3s ease;">
        <div class="icon-container d-flex align-items-center justify-content-center mx-auto mb-3 rounded-circle shadow" style="width: 100px; height: 100px; background-color: rgba(255,255,255,0.1);">
          {% if m.svg == 'user' %}
          <svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24" width="48" height="48">
            <path fill-rule="evenodd" d="M18 8a6 6 0 11-12 0 6 6 0 0112 0zm-1.5 9.75a4.5 4.5 0 00-9 0 .75.75 0 11-1.5 0a6 6 0 1112 0 .75.75 0 11-1.5 0z" clip-rule="evenodd" />
          </svg>
          {% elif m.svg == 'building' %}
          <svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24" width="48" height="48">
            <path d="M4 21V3.75A.75.75 0 014.75 3h6.5a.75.75 0 01.75.75V7h7.25a.75.75 0 01.75.75V21H4z"/>
          </svg>
          {% elif m.svg == 'document' %}
          <svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24" width="48" height="48">
            <path d="M4.5 3.75A.75.75 0 015.25 3h8.19a.75.75 0 01.53.22l4.81 4.81a.75.75 0 01.22.53v11.69a.75.75 0 01-.75.75H5.25a.75.75 0 01-.75-.75V3.75zM13.5 3.75V8a.75.75 0 00.75.75h4.25"/>
          </svg>
          {% elif m.svg == 'scissors' %}
          <svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24" width="48" height="48">
            <path d="M9 5.25a2.25 2.25 0 11-2.25-2.25A2.25 2.25 0 019 5.25zM9 18.75a2.25 2.25 0 11-2.25-2.25A2.25 2.25 0 019 18.75zM14.25 4.5L5.25 14.25M14.25 19.5L5.25 9.75"/>
          </svg>
          {% endif %}
        </div>
        <h5 class="fw-bold">{{ m.titulo }}</h5>
        <p class="small opacity-75">{{ m.desc }}</p>
      </div>
    </div>
    {% endfor %}
  </div>
</section>
{% endblock %}

{% block scripts %}
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Mostrar/ocultar men√∫ de m√©tricas
    const toggleMenu = document.getElementById('toggleMenu');
    const menuMetricas = document.getElementById('menuMetricas');
    toggleMenu?.addEventListener('click', () => {
      menuMetricas.classList.toggle('d-none');
    });

    // Hover animaci√≥n expansiva hacia abajo (solo escritorio)
    if (window.innerWidth > 768) {
      document.querySelectorAll('.modulo-card').forEach((card) => {
        card.addEventListener('mouseenter', () => {
          card.style.transform = 'scaleY(1.15)';
          card.style.boxShadow = '0 25px 50px rgba(0,0,0,0.2)';
        });
        card.addEventListener('mouseleave', () => {
          card.style.transform = 'scaleY(1)';
          card.style.boxShadow = '0 10px 20px rgba(0,0,0,0.1)';
        });
      });
    }
  });
</script>
{% endblock %}
